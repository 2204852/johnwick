



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Command-line tool and Python library to interact with an aria2c daemon process through JSON-RPC.">
      
      
        <link rel="canonical" href="https://aria2p.github.io/reference/cli/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>cli.py - aria2p</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../custom.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#aria2p.cli.check_args" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://aria2p.github.io/" title="aria2p" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              aria2p
            </span>
            <span class="md-header-nav__topic">
              
                cli.py
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/pawamoy/aria2p/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    pawamoy/aria2p
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://aria2p.github.io/" title="aria2p" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    aria2p
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/pawamoy/aria2p/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    pawamoy/aria2p
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../usage/" title="Usage" class="md-nav__link">
      Usage
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api/" title="api.py" class="md-nav__link">
      api.py
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        cli.py
      </label>
    
    <a href="./" title="cli.py" class="md-nav__link md-nav__link--active">
      cli.py
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.check_args" class="md-nav__link">
    check_args()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.get_method" class="md-nav__link">
    get_method()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.get_parser" class="md-nav__link">
    get_parser()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.main" class="md-nav__link">
    main()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_add" class="md-nav__link">
    subcommand_add()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_add_magnets" class="md-nav__link">
    subcommand_add_magnets()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_add_metalinks" class="md-nav__link">
    subcommand_add_metalinks()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_add_torrents" class="md-nav__link">
    subcommand_add_torrents()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_autopurge" class="md-nav__link">
    subcommand_autopurge()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_call" class="md-nav__link">
    subcommand_call()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_listen" class="md-nav__link">
    subcommand_listen()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_pause" class="md-nav__link">
    subcommand_pause()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_remove" class="md-nav__link">
    subcommand_remove()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_resume" class="md-nav__link">
    subcommand_resume()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_show" class="md-nav__link">
    subcommand_show()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_top" class="md-nav__link">
    subcommand_top()
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../client/" title="client.py" class="md-nav__link">
      client.py
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../downloads/" title="downloads.py" class="md-nav__link">
      downloads.py
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../options/" title="options.py" class="md-nav__link">
      options.py
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stats/" title="stats.py" class="md-nav__link">
      stats.py
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../utils/" title="utils.py" class="md-nav__link">
      utils.py
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../code_of_conduct/" title="Code of Conduct" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../credits/" title="Credits" class="md-nav__link">
      Credits
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.check_args" class="md-nav__link">
    check_args()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.get_method" class="md-nav__link">
    get_method()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.get_parser" class="md-nav__link">
    get_parser()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.main" class="md-nav__link">
    main()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_add" class="md-nav__link">
    subcommand_add()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_add_magnets" class="md-nav__link">
    subcommand_add_magnets()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_add_metalinks" class="md-nav__link">
    subcommand_add_metalinks()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_add_torrents" class="md-nav__link">
    subcommand_add_torrents()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_autopurge" class="md-nav__link">
    subcommand_autopurge()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_call" class="md-nav__link">
    subcommand_call()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_listen" class="md-nav__link">
    subcommand_listen()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_pause" class="md-nav__link">
    subcommand_pause()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_remove" class="md-nav__link">
    subcommand_remove()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_resume" class="md-nav__link">
    subcommand_resume()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_show" class="md-nav__link">
    subcommand_show()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aria2p.cli.subcommand_top" class="md-nav__link">
    subcommand_top()
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/pawamoy/aria2p/edit/master/docs/reference/cli.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>cli.py</h1>
                
                <p>Module that contains the command line application.</p>
<p>Why does this file exist, and why not put this in <strong>main</strong>?</p>
<p>You might be tempted to import things from <strong>main</strong> later,
but that will cause problems: the code will get executed twice:</p>
<ul>
<li>When you run <code>python -m aria2p</code> python will execute
  <code>__main__.py</code> as a script. That means there won't be any
  <code>aria2p.__main__</code> in <code>sys.modules</code>.</li>
<li>When you import <strong>main</strong> it will get executed again (as a module) because
  there's no <code>aria2p.__main__</code> in <code>sys.modules</code>.</li>
</ul>
<p>Also see http://click.pocoo.org/5/setuptools/#setuptools-integration.</p>
<h2 id="aria2p.cli.check_args"><code class="codehilite"><span class="n">check_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.check_args" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_args</span><span class="p">(</span><span class="n">parser</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">namedtuple</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Additional checks for command line arguments.&quot;&quot;&quot;</span>
    <span class="n">subparser</span> <span class="o">=</span> <span class="p">[</span><span class="n">action</span> <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">parser</span><span class="o">.</span><span class="n">_actions</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">argparse</span><span class="o">.</span><span class="n">_SubParsersAction</span><span class="p">)][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">choices</span>

    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">subcommand</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;pause&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">,</span> <span class="s2">&quot;remove&quot;</span><span class="p">,</span> <span class="s2">&quot;rm&quot;</span><span class="p">,</span> <span class="s2">&quot;del&quot;</span><span class="p">,</span> <span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="s2">&quot;resume&quot;</span><span class="p">,</span> <span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="s2">&quot;purge&quot;</span><span class="p">,</span> <span class="s2">&quot;clear&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">do_all</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">gids</span><span class="p">:</span>
            <span class="n">subparser</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">subcommand</span><span class="p">]</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;the following arguments are required: gids or --all&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">do_all</span> <span class="ow">and</span> <span class="n">args</span><span class="o">.</span><span class="n">gids</span><span class="p">:</span>
            <span class="n">subparser</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">subcommand</span><span class="p">]</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;argument -a/--all: not allowed with arguments gids&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">subcommand</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;add-magnet&quot;</span><span class="p">,</span> <span class="s2">&quot;add-magnets&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">uris</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">from_file</span><span class="p">:</span>
            <span class="n">subparser</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">subcommand</span><span class="p">]</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;the following arguments are required: uris or -f FILE&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">subcommand</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;add-torrent&quot;</span><span class="p">,</span> <span class="s2">&quot;add-torrents&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">torrent_files</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">from_file</span><span class="p">:</span>
            <span class="n">subparser</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">subcommand</span><span class="p">]</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;the following arguments are required: torrent_files or -f FILE&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">subcommand</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;add-metalink&quot;</span><span class="p">,</span> <span class="s2">&quot;add-metalinks&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">metalink_files</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">from_file</span><span class="p">:</span>
            <span class="n">subparser</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">subcommand</span><span class="p">]</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;the following arguments are required: metalink_files or -f FILE&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

</details>
<p>Additional checks for command line arguments.</p>
</div>
<h2 id="aria2p.cli.get_method"><code class="codehilite"><span class="n">get_method</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.get_method" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>362
363
364
365
366
367
368
369
370
371</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_method</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the actual aria2 method name from a differently formatted name.&quot;&quot;&quot;</span>
    <span class="n">methods</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">Client</span><span class="o">.</span><span class="n">METHODS</span><span class="p">:</span>
        <span class="n">methods</span><span class="p">[</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">=</span> <span class="n">method</span>
        <span class="n">methods</span><span class="p">[</span><span class="n">method</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">=</span> <span class="n">method</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">methods</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
</pre></div>
</td></tr></table>

</details>
<p>Return the actual aria2 method name from a differently formatted name.</p>
</div>
<h2 id="aria2p.cli.get_parser"><code class="codehilite"><span class="n">get_parser</span><span class="p">()</span></code><a class="headerlink" href="#aria2p.cli.get_parser" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_parser</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return a parser for the command-line options and arguments.&quot;&quot;&quot;</span>
    <span class="n">usage</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%(prog)s</span><span class="s2"> [GLOBAL_OPTS...] COMMAND [COMMAND_OPTS...]&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Command-line tool and Python library to interact with an `aria2c` daemon process through JSON-RPC.&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="n">usage</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="s2">&quot;aria2p&quot;</span><span class="p">)</span>

    <span class="n">main_help</span> <span class="o">=</span> <span class="s2">&quot;Show this help message and exit. Commands also accept the -h/--help option.&quot;</span>
    <span class="n">subcommand_help</span> <span class="o">=</span> <span class="s2">&quot;Show this help message and exit.&quot;</span>

    <span class="n">global_options</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Global options&quot;</span><span class="p">)</span>
    <span class="n">global_options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-h&quot;</span><span class="p">,</span> <span class="s2">&quot;--help&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">main_help</span><span class="p">)</span>

    <span class="n">global_options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="s2">&quot;--port&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;port&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_PORT</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Port to use to connect to the remote server.&quot;</span>
    <span class="p">)</span>
    <span class="n">global_options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-H&quot;</span><span class="p">,</span> <span class="s2">&quot;--host&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;host&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_HOST</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Host address for the remote server.&quot;</span>
    <span class="p">)</span>
    <span class="n">global_options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="s2">&quot;--secret&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;secret&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Secret token to use to connect to the remote server.&quot;</span>
    <span class="p">)</span>
    <span class="n">global_options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-L&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--log-level&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;log_level&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Log level to use&quot;</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;TRACE&quot;</span><span class="p">,</span> <span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span> <span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">,</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="s2">&quot;CRITICAL&quot;</span><span class="p">),</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">global_options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-P&quot;</span><span class="p">,</span> <span class="s2">&quot;--log-path&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;log_path&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Log path to use. Can be a directory or a file.&quot;</span>
    <span class="p">)</span>

    <span class="c1"># ========= SUBPARSERS ========= #</span>
    <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">dest</span><span class="o">=</span><span class="s2">&quot;subcommand&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Commands&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="s2">&quot;aria2p&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">subparser</span><span class="p">(</span><span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">:</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-h&quot;</span><span class="p">,</span> <span class="s2">&quot;--help&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">subcommand_help</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sub</span>

    <span class="n">add_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;Add downloads with URIs/Magnets/torrents/Metalinks.&quot;</span><span class="p">)</span>
    <span class="n">add_magnets_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;add-magnets&quot;</span><span class="p">,</span> <span class="s2">&quot;Add downloads with Magnet URIs.&quot;</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;add-magnet&quot;</span><span class="p">])</span>
    <span class="n">add_metalinks_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;add-metalinks&quot;</span><span class="p">,</span> <span class="s2">&quot;Add downloads with Metalink files.&quot;</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;add-metalink&quot;</span><span class="p">])</span>
    <span class="n">add_torrents_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;add-torrents&quot;</span><span class="p">,</span> <span class="s2">&quot;Add downloads with torrent files.&quot;</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;add-torrent&quot;</span><span class="p">])</span>
    <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;autopurge&quot;</span><span class="p">,</span> <span class="s2">&quot;Automatically purge completed/removed/failed downloads.&quot;</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;autoclear&quot;</span><span class="p">])</span>
    <span class="n">call_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;Call a remote method through the JSON-RPC client.&quot;</span><span class="p">)</span>
    <span class="n">pause_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;pause&quot;</span><span class="p">,</span> <span class="s2">&quot;Pause downloads.&quot;</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;stop&quot;</span><span class="p">])</span>
    <span class="n">remove_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;remove&quot;</span><span class="p">,</span> <span class="s2">&quot;Remove downloads.&quot;</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rm&quot;</span><span class="p">,</span> <span class="s2">&quot;del&quot;</span><span class="p">,</span> <span class="s2">&quot;delete&quot;</span><span class="p">])</span>
    <span class="n">resume_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;resume&quot;</span><span class="p">,</span> <span class="s2">&quot;Resume downloads.&quot;</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">])</span>
    <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;show&quot;</span><span class="p">,</span> <span class="s2">&quot;Show the download progression.&quot;</span><span class="p">)</span>
    <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;Launch the top-like interactive interface.&quot;</span><span class="p">)</span>
    <span class="n">listen_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="p">(</span><span class="s2">&quot;listen&quot;</span><span class="p">,</span> <span class="s2">&quot;Listen to notifications.&quot;</span><span class="p">)</span>

    <span class="c1"># ========= CALL PARSER ========= #</span>
    <span class="n">call_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;method&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="p">(</span>
            <span class="s2">&quot;The method to call (case insensitive). &quot;</span>
            <span class="s2">&quot;Dashes and underscores will be removed so you can use as many as you want, or none. &quot;</span>
            <span class="s2">&quot;Prefixes like &#39;aria2.&#39; or &#39;system.&#39; are also optional.&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">call_parser_mxg</span> <span class="o">=</span> <span class="n">call_parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
    <span class="n">call_parser_mxg</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-P&quot;</span><span class="p">,</span> <span class="s2">&quot;--params-list&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;params&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Parameters as a list of strings.&quot;</span>
    <span class="p">)</span>
    <span class="n">call_parser_mxg</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-J&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--json-params&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;params&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Parameters as a JSON string. You should always wrap it at least once in an array &#39;[]&#39;.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># ========= ADD PARSER ========= #</span>
    <span class="n">add_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;uris&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The URIs/file-paths to add.&quot;</span><span class="p">)</span>
    <span class="n">add_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;--from-file&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;from_file&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Load URIs from a file.&quot;</span><span class="p">)</span>

    <span class="c1"># ========= ADD MAGNET PARSER ========= #</span>
    <span class="n">add_magnets_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;uris&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The magnet URIs to add.&quot;</span><span class="p">)</span>
    <span class="n">add_magnets_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;--from-file&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;from_file&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Load URIs from a file.&quot;</span><span class="p">)</span>

    <span class="c1"># ========= ADD TORRENT PARSER ========= #</span>
    <span class="n">add_torrents_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;torrent_files&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The paths to the torrent files.&quot;</span><span class="p">)</span>
    <span class="n">add_torrents_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;--from-file&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;from_file&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Load file paths from a file.&quot;</span><span class="p">)</span>

    <span class="c1"># ========= ADD METALINK PARSER ========= #</span>
    <span class="n">add_metalinks_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;metalink_files&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The paths to the metalink files.&quot;</span><span class="p">)</span>
    <span class="n">add_metalinks_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;--from-file&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;from_file&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Load file paths from a file.&quot;</span><span class="p">)</span>

    <span class="c1"># ========= PAUSE PARSER ========= #</span>
    <span class="n">pause_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;gids&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The GIDs of the downloads to pause.&quot;</span><span class="p">)</span>
    <span class="n">pause_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-a&quot;</span><span class="p">,</span> <span class="s2">&quot;--all&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;do_all&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Pause all the downloads.&quot;</span><span class="p">)</span>
    <span class="n">pause_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;--force&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;force&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Pause without contacting servers first.&quot;</span>
    <span class="p">)</span>

    <span class="c1"># ========= RESUME PARSER ========= #</span>
    <span class="n">resume_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;gids&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The GIDs of the downloads to resume.&quot;</span><span class="p">)</span>
    <span class="n">resume_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-a&quot;</span><span class="p">,</span> <span class="s2">&quot;--all&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;do_all&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Resume all the downloads.&quot;</span><span class="p">)</span>

    <span class="c1"># ========= REMOVE PARSER ========= #</span>
    <span class="n">remove_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;gids&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The GIDs of the downloads to remove.&quot;</span><span class="p">)</span>
    <span class="n">remove_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-a&quot;</span><span class="p">,</span> <span class="s2">&quot;--all&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;do_all&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Remove all the downloads.&quot;</span><span class="p">)</span>
    <span class="n">remove_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;--force&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;force&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Remove without contacting servers first.&quot;</span>
    <span class="p">)</span>

    <span class="c1"># ========= LISTEN PARSER ========= #</span>
    <span class="n">listen_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-c&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--callbacks-module&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;callbacks_module&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Path to the Python module defining your notifications callbacks.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">listen_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;event_types&quot;</span><span class="p">,</span>
        <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The types of notifications to process: &quot;</span>
        <span class="s2">&quot;start, pause, stop, error, complete or btcomplete. &quot;</span>
        <span class="s2">&quot;Example: aria2p listen error btcomplete. &quot;</span>
        <span class="s2">&quot;Useful if you want to spawn multiple specialized aria2p listener, &quot;</span>
        <span class="s2">&quot;for example one for each type of notification, &quot;</span>
        <span class="s2">&quot;but still want to use only one callback file.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">listen_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-t&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--timeout&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;timeout&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Timeout in seconds to use when waiting for data over the WebSocket at each iteration. &quot;</span>
        <span class="s2">&quot;Use small values for faster reactivity when stopping to listen.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">parser</span>
</pre></div>
</td></tr></table>

</details>
<p>Return a parser for the command-line options and arguments.</p>
</div>
<h2 id="aria2p.cli.main"><code class="codehilite"><span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.main" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The main function, which is executed when you type ``aria2p`` or ``python -m aria2p``.&quot;&quot;&quot;</span>

    <span class="n">parser</span> <span class="o">=</span> <span class="n">get_parser</span><span class="p">()</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="vm">__dict__</span>

    <span class="n">log_level</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;log_level&quot;</span><span class="p">)</span>
    <span class="n">log_path</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;log_path&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">log_path</span><span class="p">:</span>
        <span class="n">log_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">log_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">log_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
            <span class="n">log_path</span> <span class="o">=</span> <span class="n">log_path</span> <span class="o">/</span> <span class="s2">&quot;aria2p-</span><span class="si">{time}</span><span class="s2">.log&quot;</span>
        <span class="n">enable_logger</span><span class="p">(</span><span class="n">sink</span><span class="o">=</span><span class="n">log_path</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">log_level</span> <span class="ow">or</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">log_level</span><span class="p">:</span>
        <span class="n">enable_logger</span><span class="p">(</span><span class="n">sink</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">log_level</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Checking arguments&quot;</span><span class="p">)</span>
    <span class="n">check_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Instantiating API&quot;</span><span class="p">)</span>
    <span class="n">api</span> <span class="o">=</span> <span class="n">API</span><span class="p">(</span><span class="n">Client</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;host&quot;</span><span class="p">),</span> <span class="n">port</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;port&quot;</span><span class="p">),</span> <span class="n">secret</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;secret&quot;</span><span class="p">)))</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API instantiated: </span><span class="si">{api!r}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Warn if no aria2 daemon process seems to be running</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Testing connection&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">api</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_version</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">ConnectionError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[ERROR] </span><span class="si">{error}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Please make sure that an instance of aria2c is running with RPC mode enabled,&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;and that you have provided the right host, port and secret token.&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;More information at https://aria2p.readthedocs.io/en/latest.&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">2</span>

    <span class="n">subcommands</span> <span class="o">=</span> <span class="p">{</span>
        <span class="kc">None</span><span class="p">:</span> <span class="n">subcommand_top</span><span class="p">,</span>
        <span class="s2">&quot;show&quot;</span><span class="p">:</span> <span class="n">subcommand_show</span><span class="p">,</span>
        <span class="s2">&quot;top&quot;</span><span class="p">:</span> <span class="n">subcommand_top</span><span class="p">,</span>
        <span class="s2">&quot;call&quot;</span><span class="p">:</span> <span class="n">subcommand_call</span><span class="p">,</span>
        <span class="s2">&quot;add&quot;</span><span class="p">:</span> <span class="n">subcommand_add</span><span class="p">,</span>
        <span class="s2">&quot;add-magnet&quot;</span><span class="p">:</span> <span class="n">subcommand_add_magnets</span><span class="p">,</span>
        <span class="s2">&quot;add-magnets&quot;</span><span class="p">:</span> <span class="n">subcommand_add_magnets</span><span class="p">,</span>
        <span class="s2">&quot;add-torrent&quot;</span><span class="p">:</span> <span class="n">subcommand_add_torrents</span><span class="p">,</span>
        <span class="s2">&quot;add-torrents&quot;</span><span class="p">:</span> <span class="n">subcommand_add_torrents</span><span class="p">,</span>
        <span class="s2">&quot;add-metalink&quot;</span><span class="p">:</span> <span class="n">subcommand_add_metalinks</span><span class="p">,</span>
        <span class="s2">&quot;add-metalinks&quot;</span><span class="p">:</span> <span class="n">subcommand_add_metalinks</span><span class="p">,</span>
        <span class="s2">&quot;pause&quot;</span><span class="p">:</span> <span class="n">subcommand_pause</span><span class="p">,</span>
        <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="n">subcommand_pause</span><span class="p">,</span>  <span class="c1"># alias for pause</span>
        <span class="s2">&quot;resume&quot;</span><span class="p">:</span> <span class="n">subcommand_resume</span><span class="p">,</span>
        <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="n">subcommand_resume</span><span class="p">,</span>  <span class="c1"># alias for resume</span>
        <span class="s2">&quot;remove&quot;</span><span class="p">:</span> <span class="n">subcommand_remove</span><span class="p">,</span>
        <span class="s2">&quot;rm&quot;</span><span class="p">:</span> <span class="n">subcommand_remove</span><span class="p">,</span>  <span class="c1"># alias for remove</span>
        <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="n">subcommand_remove</span><span class="p">,</span>  <span class="c1"># alias for remove</span>
        <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="n">subcommand_remove</span><span class="p">,</span>  <span class="c1"># alias for remove</span>
        <span class="s2">&quot;autopurge&quot;</span><span class="p">:</span> <span class="n">subcommand_autopurge</span><span class="p">,</span>
        <span class="s2">&quot;autoclear&quot;</span><span class="p">:</span> <span class="n">subcommand_autopurge</span><span class="p">,</span>  <span class="c1"># alias for autopurge</span>
        <span class="s2">&quot;listen&quot;</span><span class="p">:</span> <span class="n">subcommand_listen</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">subcommand</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;subcommand&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">subcommand</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Running subcommand &quot;</span> <span class="o">+</span> <span class="n">subcommand</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">subcommands</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">subcommand</span><span class="p">)(</span><span class="n">api</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ClientException</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">error</span><span class="o">.</span><span class="n">code</span>
</pre></div>
</td></tr></table>

</details>
<p>The main function, which is executed when you type <code>aria2p</code> or <code>python -m aria2p</code>.</p>
</div>
<h2 id="aria2p.cli.subcommand_add"><code class="codehilite"><span class="n">subcommand_add</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">uris</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">from_file</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_add" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_add</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">,</span> <span class="n">uris</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">from_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add magnet subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>
<span class="sd">        uris: the URIs or file-paths to add.</span>
<span class="sd">        from_file: path to the file to read uris from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: 0 if OK else 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">uris</span><span class="p">:</span>
        <span class="n">uris</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">from_file</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">uris</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">read_lines</span><span class="p">(</span><span class="n">from_file</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot open file: </span><span class="si">{from_file}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">for</span> <span class="n">uri</span> <span class="ow">in</span> <span class="n">uris</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;.torrent&quot;</span><span class="p">:</span>
                <span class="n">new_downloads</span> <span class="o">=</span> <span class="p">[</span><span class="n">api</span><span class="o">.</span><span class="n">add_torrent</span><span class="p">(</span><span class="n">path</span><span class="p">)]</span>
            <span class="k">elif</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;.metalink&quot;</span><span class="p">:</span>
                <span class="n">new_downloads</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">add_metalink</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot determine type of file </span><span class="si">{path}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Known extensions are .torrent and .metalink&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
                <span class="n">ok</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">continue</span>
        <span class="k">elif</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;magnet:?&quot;</span><span class="p">):</span>
            <span class="n">new_downloads</span> <span class="o">=</span> <span class="p">[</span><span class="n">api</span><span class="o">.</span><span class="n">add_magnet</span><span class="p">(</span><span class="n">uri</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_downloads</span> <span class="o">=</span> <span class="p">[</span><span class="n">api</span><span class="o">.</span><span class="n">add_uris</span><span class="p">([</span><span class="n">uri</span><span class="p">])]</span>

        <span class="k">for</span> <span class="n">new_download</span> <span class="ow">in</span> <span class="n">new_downloads</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created download </span><span class="si">{new_download.gid}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">ok</span> <span class="k">else</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

</details>
<p>Add magnet subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>uris</code></td>
<td><code>List[str]</code></td>
<td>the URIs or file-paths to add.</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>from_file</code></td>
<td><code>str</code></td>
<td>path to the file to read uris from.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: 0 if OK else 1.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_add_magnets"><code class="codehilite"><span class="n">subcommand_add_magnets</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">uris</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">from_file</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_add_magnets" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_add_magnets</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">,</span> <span class="n">uris</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">from_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add magnet subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>
<span class="sd">        uris: the URIs of the magnets.</span>
<span class="sd">        from_file: path to the file to read uris from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: always 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">uris</span><span class="p">:</span>
        <span class="n">uris</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">from_file</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">uris</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">read_lines</span><span class="p">(</span><span class="n">from_file</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot open file: </span><span class="si">{from_file}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">for</span> <span class="n">uri</span> <span class="ow">in</span> <span class="n">uris</span><span class="p">:</span>
        <span class="n">new_download</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">add_magnet</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created download </span><span class="si">{new_download.gid}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">ok</span> <span class="k">else</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

</details>
<p>Add magnet subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>uris</code></td>
<td><code>List[str]</code></td>
<td>the URIs of the magnets.</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>from_file</code></td>
<td><code>str</code></td>
<td>path to the file to read uris from.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: always 0.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_add_metalinks"><code class="codehilite"><span class="n">subcommand_add_metalinks</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">metalink_files</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">from_file</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_add_metalinks" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_add_metalinks</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">,</span> <span class="n">metalink_files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">from_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add metalink subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>
<span class="sd">        metalink_files: the paths to the metalink files.</span>
<span class="sd">        from_file: path to the file to metalink files paths from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: 0 if OK else 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">metalink_files</span><span class="p">:</span>
        <span class="n">metalink_files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">from_file</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">metalink_files</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">read_lines</span><span class="p">(</span><span class="n">from_file</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot open file: </span><span class="si">{from_file}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">for</span> <span class="n">metalink_file</span> <span class="ow">in</span> <span class="n">metalink_files</span><span class="p">:</span>
        <span class="n">new_downloads</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">add_metalink</span><span class="p">(</span><span class="n">metalink_file</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">download</span> <span class="ow">in</span> <span class="n">new_downloads</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created download </span><span class="si">{download.gid}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">ok</span> <span class="k">else</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

</details>
<p>Add metalink subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>metalink_files</code></td>
<td><code>List[str]</code></td>
<td>the paths to the metalink files.</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>from_file</code></td>
<td><code>str</code></td>
<td>path to the file to metalink files paths from.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: 0 if OK else 1.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_add_torrents"><code class="codehilite"><span class="n">subcommand_add_torrents</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">torrent_files</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">from_file</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_add_torrents" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_add_torrents</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">,</span> <span class="n">torrent_files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">from_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add torrent subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>
<span class="sd">        torrent_files: the paths to the torrent files.</span>
<span class="sd">        from_file: path to the file to read torrent files paths from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: always 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">torrent_files</span><span class="p">:</span>
        <span class="n">torrent_files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">from_file</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">torrent_files</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">read_lines</span><span class="p">(</span><span class="n">from_file</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot open file: </span><span class="si">{from_file}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">for</span> <span class="n">torrent_file</span> <span class="ow">in</span> <span class="n">torrent_files</span><span class="p">:</span>
        <span class="n">new_download</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">add_torrent</span><span class="p">(</span><span class="n">torrent_file</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created download </span><span class="si">{new_download.gid}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">ok</span> <span class="k">else</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

</details>
<p>Add torrent subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>torrent_files</code></td>
<td><code>List[str]</code></td>
<td>the paths to the torrent files.</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>from_file</code></td>
<td><code>str</code></td>
<td>path to the file to read torrent files paths from.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: always 0.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_autopurge"><code class="codehilite"><span class="n">subcommand_autopurge</span><span class="p">(</span><span class="n">api</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_autopurge" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_autopurge</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Autopurge subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: 0 if all success, 1 if one failure.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">get_version</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">version</span><span class="o">.</span><span class="n">major</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="mi">9</span> <span class="o">&gt;</span> <span class="n">version</span><span class="o">.</span><span class="n">minor</span> <span class="o">&gt;=</span> <span class="mi">7</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;Future change warning: command &#39;autopurge&#39; will be renamed &#39;purge&#39; in version 0.9.0, &quot;</span>
            <span class="s2">&quot;with an &#39;autoremove&#39; alias.&quot;</span><span class="p">,</span>
            <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">api</span><span class="o">.</span><span class="n">autopurge</span><span class="p">():</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

</details>
<p>Autopurge subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: 0 if all success, 1 if one failure.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_call"><code class="codehilite"><span class="n">subcommand_call</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_call" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_call</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Call subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>
<span class="sd">        method: name of the method to call.</span>
<span class="sd">        params: parameters to use when calling method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: always 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">real_method</span> <span class="o">=</span> <span class="n">get_method</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">real_method</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;aria2p: call: Unknown method </span><span class="si">{method}</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Run &#39;aria2p call listmethods&#39; to list the available methods.&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">real_method</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

    <span class="k">return</span> <span class="mi">0</span>
</pre></div>
</td></tr></table>

</details>
<p>Call subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>method</code></td>
<td><code>str</code></td>
<td>name of the method to call.</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>params</code></td>
<td><code>Union[str, List[str]]</code></td>
<td>parameters to use when calling method.</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: always 0.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_listen"><code class="codehilite"><span class="n">subcommand_listen</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">callbacks_module</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">event_types</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_listen" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_listen</span><span class="p">(</span>
    <span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">,</span> <span class="n">callbacks_module</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">event_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Listen subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>
<span class="sd">        callbacks_module: the path to the module to import, containing the callbacks as functions.</span>
<span class="sd">        event_types: the event types to process.</span>
<span class="sd">        timeout: the timeout to pass to the WebSocket connection, in seconds.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: always 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">callbacks_module</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;aria2p: listen: Please provide the callback module file path with -c option&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">callbacks_module</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
        <span class="n">callbacks_module</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">callbacks_module</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">event_types</span><span class="p">:</span>
        <span class="n">event_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="s2">&quot;pause&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="s2">&quot;complete&quot;</span><span class="p">,</span> <span class="s2">&quot;btcomplete&quot;</span><span class="p">]</span>

    <span class="n">spec</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">spec_from_file_location</span><span class="p">(</span><span class="s2">&quot;aria2p_callbacks&quot;</span><span class="p">,</span> <span class="n">callbacks_module</span><span class="p">)</span>
    <span class="n">callbacks</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">module_from_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">callbacks</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;aria2p: Could not import module file </span><span class="si">{callbacks_module}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="n">spec</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">exec_module</span><span class="p">(</span><span class="n">callbacks</span><span class="p">)</span>

    <span class="n">callbacks_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">callback_name</span> <span class="ow">in</span> <span class="p">(</span>
        <span class="s2">&quot;on_download_start&quot;</span><span class="p">,</span>
        <span class="s2">&quot;on_download_pause&quot;</span><span class="p">,</span>
        <span class="s2">&quot;on_download_stop&quot;</span><span class="p">,</span>
        <span class="s2">&quot;on_download_error&quot;</span><span class="p">,</span>
        <span class="s2">&quot;on_download_complete&quot;</span><span class="p">,</span>
        <span class="s2">&quot;on_bt_download_complete&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">callback_name</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;download&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">event_types</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">callbacks</span><span class="p">,</span> <span class="n">callback_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">callback</span><span class="p">:</span>
                <span class="n">callbacks_kwargs</span><span class="p">[</span><span class="n">callback_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>

    <span class="n">api</span><span class="o">.</span><span class="n">listen_to_notifications</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span> <span class="n">handle_signals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">callbacks_kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span>
</pre></div>
</td></tr></table>

</details>
<p>Listen subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>callbacks_module</code></td>
<td><code>Union[str, pathlib.Path]</code></td>
<td>the path to the module to import, containing the callbacks as functions.</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>event_types</code></td>
<td><code>List[str]</code></td>
<td>the event types to process.</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>timeout</code></td>
<td><code>int</code></td>
<td>the timeout to pass to the WebSocket connection, in seconds.</td>
<td><code>5</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: always 0.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_pause"><code class="codehilite"><span class="n">subcommand_pause</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">gids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">do_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_pause" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_pause</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">,</span> <span class="n">gids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">do_all</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pause subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>
<span class="sd">        gids: the GIDs of the downloads to pause.</span>
<span class="sd">        do_all: pause all downloads if True.</span>
<span class="sd">        force: force pause or not (see API.pause).</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: 0 if all success, 1 if one failure.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">do_all</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">api</span><span class="o">.</span><span class="n">pause_all</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="c1"># FIXME: could break if API.resume needs more info than just gid</span>
    <span class="c1"># See how we do that in subcommand_remove</span>
    <span class="n">downloads</span> <span class="o">=</span> <span class="p">[</span><span class="n">Download</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;gid&quot;</span><span class="p">:</span> <span class="n">gid</span><span class="p">})</span> <span class="k">for</span> <span class="n">gid</span> <span class="ow">in</span> <span class="n">gids</span><span class="p">]</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">pause</span><span class="p">(</span><span class="n">downloads</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ClientException</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

</details>
<p>Pause subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>gids</code></td>
<td><code>List[str]</code></td>
<td>the GIDs of the downloads to pause.</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>do_all</code></td>
<td><code>bool</code></td>
<td>pause all downloads if True.</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>force</code></td>
<td><code>bool</code></td>
<td>force pause or not (see API.pause).</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: 0 if all success, 1 if one failure.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_remove"><code class="codehilite"><span class="n">subcommand_remove</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">gids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">do_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_remove" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_remove</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">,</span> <span class="n">gids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">do_all</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>
<span class="sd">        gids: the GIDs of the downloads to remove.</span>
<span class="sd">        do_all: pause all downloads if True.</span>
<span class="sd">        force: force pause or not (see API.remove).</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: 0 if all success, 1 if one failure.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">do_all</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">api</span><span class="o">.</span><span class="n">remove_all</span><span class="p">():</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="n">ok</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">downloads</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">gid</span> <span class="ow">in</span> <span class="n">gids</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">downloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">get_download</span><span class="p">(</span><span class="n">gid</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ClientException</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">),</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">downloads</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">ok</span> <span class="k">else</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ClientException</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

</details>
<p>Remove subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>gids</code></td>
<td><code>List[str]</code></td>
<td>the GIDs of the downloads to remove.</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>do_all</code></td>
<td><code>bool</code></td>
<td>pause all downloads if True.</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>force</code></td>
<td><code>bool</code></td>
<td>force pause or not (see API.remove).</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: 0 if all success, 1 if one failure.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_resume"><code class="codehilite"><span class="n">subcommand_resume</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">gids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">do_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_resume" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_resume</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">,</span> <span class="n">gids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">do_all</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Resume subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>
<span class="sd">        gids: the GIDs of the downloads to resume.</span>
<span class="sd">        do_all: pause all downloads if True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: 0 if all success, 1 if one failure.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">do_all</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">api</span><span class="o">.</span><span class="n">resume_all</span><span class="p">():</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="c1"># FIXME: could break if API.resume needs more info than just gid</span>
    <span class="c1"># See how we do that in subcommand_remove</span>
    <span class="n">downloads</span> <span class="o">=</span> <span class="p">[</span><span class="n">Download</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;gid&quot;</span><span class="p">:</span> <span class="n">gid</span><span class="p">})</span> <span class="k">for</span> <span class="n">gid</span> <span class="ow">in</span> <span class="n">gids</span><span class="p">]</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">resume</span><span class="p">(</span><span class="n">downloads</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ClientException</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

</details>
<p>Resume subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>gids</code></td>
<td><code>List[str]</code></td>
<td>the GIDs of the downloads to resume.</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>do_all</code></td>
<td><code>bool</code></td>
<td>pause all downloads if True.</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: 0 if all success, 1 if one failure.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_show"><code class="codehilite"><span class="n">subcommand_show</span><span class="p">(</span><span class="n">api</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_show" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_show</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Show subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: always 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">downloads</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_downloads</span><span class="p">()</span>

    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;{&#39;GID&#39;:&lt;17} &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;{&#39;STATUS&#39;:&lt;9} &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;{&#39;PROGRESS&#39;:&gt;8} &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;{&#39;DOWN_SPEED&#39;:&gt;12} &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;{&#39;UP_SPEED&#39;:&gt;12} &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;{&#39;ETA&#39;:&gt;8}  &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;NAME&quot;</span>
    <span class="p">)</span>

    <span class="k">for</span> <span class="n">download</span> <span class="ow">in</span> <span class="n">downloads</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{download.gid:&lt;17}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{download.status:&lt;9}</span><span class="s2"> &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;{download.progress_string():&gt;8} &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;{download.download_speed_string():&gt;12} &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;{download.upload_speed_string():&gt;12} &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;{download.eta_string():&gt;8}  &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{download.name}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="mi">0</span>
</pre></div>
</td></tr></table>

</details>
<p>Show subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: always 0.</td>
</tr>
</tbody>
</table>
</div>
<h2 id="aria2p.cli.subcommand_top"><code class="codehilite"><span class="n">subcommand_top</span><span class="p">(</span><span class="n">api</span><span class="p">)</span></code><a class="headerlink" href="#aria2p.cli.subcommand_top" title="Permanent link">&para;</a></h2>
<div class="autodoc">
<details class="note"><summary>Show source code in aria2p/cli.py</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">subcommand_top</span><span class="p">(</span><span class="n">api</span><span class="p">:</span> <span class="n">API</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Top subcommand.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        api: the API instance to use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: always 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">Interface</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The top-interface dependencies are not installed. Try running `pip install aria2p[tui]` to install them.&quot;</span><span class="p">,</span>
            <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="n">interface</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">api</span><span class="p">)</span>
    <span class="n">success</span> <span class="o">=</span> <span class="n">interface</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">success</span> <span class="k">else</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

</details>
<p>Top subcommand.</p>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api</code></td>
<td><code>API</code></td>
<td>the API instance to use.</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>int: always 0.</td>
</tr>
</tbody>
</table>
</div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../api/" title="api.py" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                api.py
              </span>
            </div>
          </a>
        
        
          <a href="../client/" title="client.py" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                client.py
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>